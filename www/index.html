<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style type="text/css">#left-cross, #right-cross {
  border: solid black 1px;
  position: absolute;
  bottom: 10px;
  left: 10px; }

#right-cross {
  right: 10px;
  left: initial; }
</style></head>
  <body>
  <script type="text/javascript">!function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=35)}([function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,n){t.exports=!n(5)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,n){"use strict";e.__esModule=!0;var r=n(17),i=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,i.default)(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}()},function(t,e){var n=t.exports={version:"2.5.5"};"number"==typeof __e&&(__e=n)},function(t,e,n){var r=n(6),i=n(3),o=n(22),s=n(26),c=n(25),a=function(t,e,n){var u,f,l,_=t&a.F,h=t&a.G,d=t&a.S,p=t&a.P,v=t&a.B,g=t&a.W,y=h?i:i[e]||(i[e]={}),x=y.prototype,b=h?r:d?r[e]:(r[e]||{}).prototype;h&&(n=e);for(u in n)(f=!_&&b&&void 0!==b[u])&&c(y,u)||(l=f?b[u]:n[u],y[u]=h&&"function"!=typeof b[u]?n[u]:v&&f?o(l,r):g&&b[u]==l?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(l):p&&"function"==typeof l?o(Function.call,l):l,p&&((y.virtual||(y.virtual={}))[u]=l,t&a.R&&x&&!x[u]&&s(x,u,l)))};a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,a.U=64,a.R=128,t.exports=a},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){var r=n(21),i=n(27),o=n(31),s=Object.defineProperty;e.f=n(1)?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),i)try{return s(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=n(13),o=r(i),s=n(15),c=r(s),a=n(14),u=r(a),f=n(12),l=r(f),_=n(34),h=r(_),d=new o.default(document,h.default),p=new u.default,v=new c.default(d,h.default,p),g=new XMLHttpRequest,y=new l.default(h.default,g);d.print();var x=d.get_canvas_objects();for(var b in x){d.clear_canvas(x[b]);var w=h.default.axis_size/2;b===h.default.lc_id&&(w=h.default.axis_size-h.default.control_point_size/2),d.draw_control_point({x:h.default.axis_size/2,y:w},x[b])}v.set_state_listener(y),v.add_listeners()},function(t,e){},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=r(i),s=n(2),c=r(s),a=function(){function t(e,n){(0,o.default)(this,t),this.actual_state=null,this.config=e,this.is_sending_needed=!0,this.is_xhr_in_progress=!1,this.last_state_change_request=null,this.xhr=n;var r=this;this.xhr.addEventListener("loadend",function(){r.set_xhr_done()})}return(0,c.default)(t,[{key:"set_state_changed",value:function(t){this.actual_state=t,this.send_request(t)}},{key:"set_xhr_done",value:function(){this.is_xhr_in_progress=!1,null!==this.last_state_change_request&&(this.send_request(this.last_state_change_request),this.last_state_change_request=null)}},{key:"send_request",value:function(t){this.is_xhr_in_progress?this.last_state_change_request=t:(this.xhr.abort(),this.xhr.open("GET","/control"+this.get_state_querystring(t),!0),this.is_xhr_in_progress=!0,this.xhr.send())}},{key:"get_state_querystring",value:function(t){var e="?";return e+="y="+t.left_horizontal,e+="&t="+t.left_vertical,e+="&p="+t.right_horizontal,e+="&r="+t.right_vertical}}]),t}();e.default=a},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=r(i),s=n(2),c=r(s),a=function(){function t(e,n){(0,o.default)(this,t),this.config=n,this.document=e,this.canvas_objects=null}return(0,c.default)(t,[{key:"print",value:function(){var t,e;this.append_controls_to_page();for(t in this.canvas_objects)e=this.canvas_objects[t],e.width=this.config.axis_size,e.height=this.config.axis_size}},{key:"get_control_point_size",value:function(){return this.config.control_point_size}},{key:"get_canvas_objects",value:function(){if(!this.is_controls_in_page())throw"Chces canvas, ale oni jeste nejsou na strance";return this.canvas_objects}},{key:"append_controls_to_page",value:function(){var t=this.document.createElement("div");t.id=this.config.controls_id,this.canvas_objects=this.create_canvas_objects(this.document),t.appendChild(this.canvas_objects[this.config.lc_id]),t.appendChild(this.canvas_objects[this.config.rc_id]),this.document.body.appendChild(t)}},{key:"is_controls_in_page",value:function(){var t=!1;return this.document.getElementById([this.config.controls_id])&&(t=!0),t}},{key:"create_canvas_objects",value:function(t){var e={};return e[this.config.lc_id]=t.createElement("canvas"),e[this.config.rc_id]=t.createElement("canvas"),e[this.config.lc_id].id=this.config.lc_id,e[this.config.rc_id].id=this.config.rc_id,e}},{key:"draw_control_point",value:function(t,e){var n=e.getContext("2d");this.clear_canvas(e),n.fillStyle=this.config.control_point_style,n.fillRect(t.x-this.get_control_point_size()/2,t.y-this.get_control_point_size()/2,this.get_control_point_size(),this.get_control_point_size())}},{key:"clear_canvas",value:function(t){var e=t.getContext("2d");e.clearRect(0,0,t.width,t.height),e.fillStyle=this.config.axis_style,e.fillRect(this.config.axis_size/2,0,1,t.height),e.fillRect(0,this.config.axis_size/2,t.width,1)}}]),t}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=function(t){return t&&t.__esModule?t:{default:t}}(r),o=function t(){(0,i.default)(this,t),this.left_horizontal=0,this.left_vertical=50,this.right_horizontal=50,this.right_vertical=50};e.default=o},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(16),o=r(i),s=n(0),c=r(s),a=n(2),u=r(a),f=function(){function t(e,n,r){(0,c.default)(this,t),this.printer=e,this.state=r,this.listener=null,this.config=n}return(0,u.default)(t,[{key:"add_listeners",value:function(){var t,e=this.printer.get_canvas_objects();for(t in e)this.add_touchstart(e[t]),this.add_touchmove(e[t]),this.add_touchend(e[t])}},{key:"add_touchstart",value:function(t){var e=this;t.addEventListener("touchstart",function(n){n.preventDefault();var r=e.get_touch_for_canvas(t,n.changedTouches),i=e.get_touch_coords(t,r),o=e.get_real_coords(t,r);e.process_state_change(o,t),e.printer.draw_control_point(i,t)},!1)}},{key:"add_touchmove",value:function(t){var e=this;t.addEventListener("touchmove",function(n){n.preventDefault();var r=e.get_touch_for_canvas(t,n.changedTouches),i=e.get_touch_coords(t,r),o=e.get_real_coords(t,r);e.process_state_change(o,t),e.printer.draw_control_point(i,t)},!1)}},{key:"add_touchend",value:function(t){var e=this;t.addEventListener("touchend",function(n){n.preventDefault();var r=e.get_touch_for_canvas(t,n.changedTouches),i=e.get_touch_coords(t,r),o=e.get_real_coords(t,r);i.x=e.config.axis_size/2,o.x=e.config.axis_size/2,t.id===e.config.rc_id&&(i.y=e.config.axis_size/2,o.y=e.config.axis_size/2),e.process_state_change(o,t),e.printer.draw_control_point(i,t)},!1)}},{key:"set_state_listener",value:function(t){this.listener=t}},{key:"process_state_change",value:function(t,e){e.id===this.config.lc_id?(this.state.left_horizontal=(0,o.default)(100*t.x/e.width),this.state.left_vertical=100-(0,o.default)(100*t.y/e.height)):(this.state.right_horizontal=(0,o.default)(100*t.x/e.width),this.state.right_vertical=100-(0,o.default)(100*t.y/e.height)),this.call_listener(this.state)}},{key:"call_listener",value:function(t){null!==this.listener&&this.listener.set_state_changed(t)}},{key:"get_touch_for_canvas",value:function(t,e){var n,r=e[0];for(n=1;n<e.length;n+=1)if(t.id===e[n].target.id){r=e[n];break}return r}},{key:"get_touch_coords",value:function(t,e){var n={x:e.pageX-t.offsetLeft,y:e.pageY-t.offsetTop};return this.get_coords_in_limits(t,n)}},{key:"get_real_coords",value:function(t,e){var n={x:e.pageX-t.offsetLeft,y:e.pageY-t.offsetTop};return this.get_real_coords_in_limits(t,n)}},{key:"get_coords_in_limits",value:function(t,e){var n;for(n in e)e=this.get_coord_in_limits(t,e,n);return e}},{key:"get_real_coords_in_limits",value:function(t,e){var n;for(n in e)e=this.get_real_coord_in_limits(t,e,n);return e}},{key:"get_real_coord_in_limits",value:function(t,e,n){var r={x:"width",y:"height"};return e[n]<0?e[n]=0:e[n]>t[r[n]]&&(e[n]=t[r[n]]),e}},{key:"get_coord_in_limits",value:function(t,e,n){var r={x:"width",y:"height"},i=this.printer.get_control_point_size()/2;return e[n]<i?e[n]=i:e[n]>t[r[n]]-i&&(e[n]=t[r[n]]-i),e}}]),t}();e.default=f},function(t,e,n){t.exports={default:n(18),__esModule:!0}},function(t,e,n){t.exports={default:n(19),__esModule:!0}},function(t,e,n){n(32),t.exports=n(3).Number.parseInt},function(t,e,n){n(33);var r=n(3).Object;t.exports=function(t,e,n){return r.defineProperty(t,e,n)}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var r=n(7);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){var r=n(20);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){var r=n(7),i=n(6).document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var r=n(8),i=n(29);t.exports=n(1)?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){t.exports=!n(1)&&!n(5)(function(){return 7!=Object.defineProperty(n(24)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){var r=n(6).parseInt,i=n(30).trim,o=n(9),s=/^[-+]?0[xX]/;t.exports=8!==r(o+"08")||22!==r(o+"0x16")?function(t,e){var n=i(String(t),3);return r(n,e>>>0||(s.test(n)?16:10))}:r},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var r=n(4),i=n(23),o=n(5),s=n(9),c="["+s+"]",a="​",u=RegExp("^"+c+c+"*"),f=RegExp(c+c+"*$"),l=function(t,e,n){var i={},c=o(function(){return!!s[t]()||a[t]()!=a}),u=i[t]=c?e(_):s[t];n&&(i[n]=u),r(r.P+r.F*c,"String",i)},_=l.trim=function(t,e){return t=String(i(t)),1&e&&(t=t.replace(u,"")),2&e&&(t=t.replace(f,"")),t};t.exports=l},function(t,e,n){var r=n(7);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){var r=n(4),i=n(28);r(r.S+r.F*(Number.parseInt!=i),"Number",{parseInt:i})},function(t,e,n){var r=n(4);r(r.S+r.F*!n(1),"Object",{defineProperty:n(8).f})},function(t,e){t.exports={app_name:"RC Controller",controls_id:"controls",lc_id:"left-cross",rc_id:"right-cross",axis_size:220,axis_style:"lightgray",control_point_style:"black",control_point_size:10,control_range:130,control_range_offset:25,xhr_filter:100}},function(t,e,n){n(10),t.exports=n(11)}]);</script></body>
</html>